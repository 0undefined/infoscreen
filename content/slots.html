<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8" /> 
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <link href='https://fonts.googleapis.com/css?family=Montserrat|Source+Code+Pro:900' rel='stylesheet' type='text/css'>
        <style>
            body {
                background-color: #880088;
                overflow: hidden;
            }
            h1 {
                font-family: Montserrat;
                font-size: 96pt;
                color: yellow;
                text-align: center;
            }
            
            h1:nth-of-type(2) {
                margin-top: 610px;
            }
            
            #slot-window {
                width: 500px;
                height: 400px;
                background-color: black;
                position: absolute;
                top: 350px;
                left: 710px;
                overflow: hidden;
            }
            
            .grade {
                color: white;
                font-size: 200pt;
                text-align: center;
                height: 350px;
                width: 450px;
                font-family: Source Code Pro;
                position: absolute;
                top: 0px; left: 0px;
                background-color: gray;
                border: 25px solid black;
                border-bottom: 0px;
            }
        </style>
    </head>
    <script>
        $(function () {
            var titleColorAlt = false;
            setInterval( function () {
                $('h1').css({ "color": titleColorAlt ? 'yellow' : 'red' });
                titleColorAlt = !titleColorAlt;
            }, 1000);
            
            var i = 0;
            $('.grade').each( function () {
                var $this = $(this);
                $this.css({'top': (i*375) }).data('top', i*375);
                i++;
            } );
            
            var intervalId;
            setTimeout( function () {
                intervalId = setInterval(doSpin, 10);
                setTimeout(endSpin, 9000);
            }, 2000);
            
            var stopSpin = false;
            function doSpin () {
                if (stopSpin && ($('.finalResult').data('top') === 0)) {
                    clearInterval(intervalId);
                    var resultColorAlt = false;
                    setInterval(function () {
                        $('.finalResult').css({ "background-color": resultColorAlt ? "darkred" : "darkgreen" });
                        $('body').css({ "background-color": resultColorAlt ? "darkgreen" : "darkred" });
                        resultColorAlt = !resultColorAlt;
                    }, 250);
                    setTimeout( function () {
                        $('h1').first().text('Tillykke! Du er dumpet!');
                        $('h1').last().text('Pr√∏v igen til reeksamen!');
                    }, 1000);
                    return;
                }
            
                $('.grade').each(function () {
                    var $this = $(this);
                    var newTop = $this.data('top')-15;
                    if (newTop <= -375) {
                        newTop += 7*375;
                    }
                    
                    $this.data('top', newTop);
                    $this.css({'top': newTop});
                });
            }
            
            function endSpin () {
                stopSpin = true;
            }
        });
    </script>
    <body>
        <h1>Det store karakterhjul!</h1>
        <div id="slot-window">
            <div class="grade finalResult">-3</div>
            <div class="grade">00</div>
            <div class="grade">02</div>
            <div class="grade">&nbsp;4</div>
            <div class="grade">&nbsp;7</div>
            <div class="grade">10</div>
            <div class="grade">12</div>
        </div>
        <h1>Det store karakterhjul!</h1>
    </body>
</html>
