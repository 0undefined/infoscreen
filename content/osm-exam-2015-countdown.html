<!doctype html>
<html>
  <head>
    <title>OSM Exam 2015 Countdown</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>
  <body>
    <div id="time" class="blink"></div>
    <style>
      #time {
        margin:auto;
        margin-top:15%;
        text-align:center;
        font-size:10vw;
        position:relative;
        top:50%
      }

/* http://stackoverflow.com/questions/4894488/blinking-text-cross-browser */
@-webkit-keyframes blink {
    from {
        opacity: 1.0;
    }
    to {
        opacity: 0.0;
    }
}
blink {
    -webkit-animation-name: blink;
    -webkit-animation-iteration-count: infinite;
    -webkit-animation-timing-function: cubic-bezier(1.0, 0, 0, 1.0);
    -webkit-animation-duration: 2s;
    font-weight:bold;
}
    </style>
    <script>
      var HANDOUT = new Date(2015, 3, 23, 9);
      var DEADLINE = new Date(2015, 3, 27, 13, 55);
      showTime();

      function timeLeft() {
        var diff = new Date(DEADLINE.getTime() - Date.now());

        return {
          days: diff.getDate() - 1, // fordi vi starter på 1
          hours: diff.getHours(),
          minutes: diff.getMinutes()
        };
      }

      function pctLeft() {
        var handout = new Date(2015, 3, 23, 9);
        var deadline = new Date(2015, 3, 27, 13, 55);
        var diff_now = deadline - Date.now();
        var diff_deadline = deadline - handout;

        return Math.round((diff_now / diff_now)*100*100)/100;
      }

      function randomItem(items) {
        return items[Math.floor(Math.random()*items.length)];
      }

      function randomIntro() {
        return randomItem([
          "Har du afleveret OSM eksamen endnu?",
          "Jyrki vil gerne rette din OSM eksamen!",
          "Er der heisenbugs din kerne?",
          "Får du dræbt dine processer?"]);
      }

      function randomMotivator() {
        return randomItem([
         "<b>?!KUN!?</b>",
         "<i>HELE</i>",
         "round robin",
         "heldigvis",
         "sådan cirkus"]);
      }

      function showTime() {
        var toShow = timeLeft(); 
        var timeDiv = document.getElementById("time");

        timeDiv.innerHTML = "".concat(
          randomIntro(),
          "<br/><br/>Der er ",
          randomMotivator(),
          "</br><br/><b>",
          toShow.days, " dage, ",
          toShow.hours, " timer, og ",
          toShow.minutes, " minutter",
          "</b><br/><br/>tilbage!<br/><br/>");
//          "Du burde nu være ", pctLeft(), "% igennem..");
      }
    </script>
  </body>
</html>
